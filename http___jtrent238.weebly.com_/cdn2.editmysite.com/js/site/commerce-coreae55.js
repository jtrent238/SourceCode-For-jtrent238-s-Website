function str_repeat(e,t){for(var i=[];t>0;i[--t]=e);return i.join("")}function sprintf(){for(var e,t,i,s,n,o=0,a=arguments[o++],r=[],l="";a;){if(t=/^[^\x25]+/.exec(a))r.push(t[0]);else if(t=/^\x25{2}/.exec(a))r.push("%");else{if(!(t=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(a)))throw"Oops ?!";if(null==(e=arguments[t[1]||o++])||void 0==e)throw"Too few arguments.";if(/[^s]/.test(t[7])&&"number"!=typeof e)throw"Expecting number but found "+typeof e;switch(t[7]){case"b":e=e.toString(2);break;case"c":e=String.fromCharCode(e);break;case"d":e=parseInt(e);break;case"e":e=t[6]?e.toExponential(t[6]):e.toExponential();break;case"f":e=t[6]?parseFloat(e).toFixed(t[6]):parseFloat(e);break;case"o":e=e.toString(8);break;case"s":e=(e=String(e))&&t[6]?e.substring(0,t[6]):e;break;case"u":e=Math.abs(e);break;case"x":e=e.toString(16);break;case"X":e=e.toString(16).toUpperCase()}e=/[def]/.test(t[7])&&t[2]&&e>=0?"+"+e:e,s=t[3]?"0"==t[3]?"0":t[3].charAt(1):" ",n=t[5]-String(e).length-l.length,i=t[5]?str_repeat(s,n):"",r.push(l+(t[4]?e+i:i+e))}a=a.substring(t[0].length)}return r.join("")}!function(e){var t;return e.event.fix=function(e){return function(t){return t=e.apply(this,arguments),(0===t.type.indexOf("copy")||0===t.type.indexOf("paste"))&&(t.clipboardData=t.originalEvent.clipboardData),t}}(e.event.fix),t={callback:e.noop,matchType:/image.*/},e.fn.pasteImageReader=function(i){return"function"==typeof i&&(i={callback:i}),i=e.extend({},t,i),this.each(function(){var t,s;return s=this,t=e(this),t.bind("paste",function(e){var t,n;return n=!1,t=e.clipboardData?e.clipboardData:!1,t!==!1?Array.prototype.forEach.call(t.types,function(e,o){var a,r;if(!n)return e.match(i.matchType)||t.items[o].type.match(i.matchType)?(a=t.items[o].getAsFile(),r=new FileReader,r.onload=function(e){return i.callback.call(s,{dataURL:e.target.result,event:e,file:a,name:a.name})},r.readAsDataURL(a),n=!0):void 0}):void 0})})}}(jQuery),_wAMD.define("vendor/jquery.pasteImageReader",function(){}),function(e){function t(e){for(var t=1;t<arguments.length;t++)e=e.replace("%"+(t-1),arguments[t]);return e}function i(i,s){var n,o,a,r,l,c,h,u,d=e("img:first",i),p=d,f=null,m=null,g=null,v=null,b=null,w=null,y=0,C=0,x=0,S=0,F=0,E=0,k=0,T=this;setTimeout(function(){if(null===m){var e=i.width();i.parent().append(t('<div style="width:%0px;position:absolute;top:75%;left:%1px;text-align:center" class="cloud-zoom-loading" >Loading...</div>',e/3,e/2-e/6)).find(":last").css("opacity",.5)}},200);var D=function(){null!==w&&(w.remove(),w=null)};this.removeBits=function(){g&&(g.remove(),g=null),v&&(v.remove(),v=null),b&&(b.remove(),b=null),D(),e(".cloud-zoom-loading",i.parent()).remove()},this.destroy=function(){i.data("zoom",null),m&&(m.unbind(),m.remove(),m=null),f&&(f.remove(),f=null),this.removeBits()},this.fadedOut=function(){f&&(f.remove(),f=null),this.removeBits()},this.controlLoop=function(){if(g){var e=c-p.offset().left-.5*r>>0,t=h-p.offset().top-.5*l>>0;0>e?e=0:e>p.outerWidth()-r&&(e=p.outerWidth()-r),0>t?t=0:t>p.outerHeight()-l&&(t=p.outerHeight()-l),g.css({left:e,top:t}),g.css("background-position",-e+"px "+-t+"px"),x=e/p.outerWidth()*a.width>>0,S=t/p.outerHeight()*a.height>>0,E+=(x-E)/s.smoothMove,F+=(S-F)/s.smoothMove,f.css("background-position",-(E>>0)+"px "+(-(F>>0)+"px"))}y=setTimeout(function(){T.controlLoop()},30)},this.init2=function(e,t){k++,1===t&&(a=e),2===k&&this.init()},this.init=function(){e(".cloud-zoom-loading",i.parent()).remove(),m=e(".mousetrap",i.parent()),m&&(m.unbind(),m.remove()),m=i.parent().append(t("<div class='mousetrap' style='background-image:url(\"//"+ASSETS_BASE+"/images/blank.gif\");z-index:2;position:absolute;width:%0px;height:%1px;left:%2px;top:%3px;'></div>",p.outerWidth(),p.outerHeight(),0,0)).find(":last"),m.bind("mousemove",this,function(e){c=e.pageX,h=e.pageY}),m.bind("mouseleave",this,function(){return clearTimeout(y),clearTimeout(C),g&&g.fadeOut(299),v&&v.fadeOut(299),b&&b.fadeOut(299),f&&f.fadeOut(300,function(){T.fadedOut()}),!1});var n=i.attr("href"),o=i.find("img").attr("src");n!=o&&m.bind("mouseenter",this,function(n){C=setTimeout(function(){u=n.data,f&&(f.stop(!0,!1),f.remove());var o=s.adjustX,c=s.adjustY,h=p.outerWidth(),y=p.outerHeight(),C=s.zoomWidth,x=s.zoomHeight;"auto"==s.zoomWidth&&(C=h),"auto"==s.zoomHeight&&(x=y);var S=i.parent();switch(s.position){case"top":c-=x;break;case"right":o+=h;break;case"bottom":c+=y;break;case"left":o-=C;break;case"inside":C=h,x=y;break;default:S=e("#"+s.position),S.length?(C=S.innerWidth(),x=S.innerHeight()):(S=i,o+=h,c+=y)}f=S.append(t('<div id="cloud-zoom-big" class="cloud-zoom-big" style="display:none;position:absolute;left:%0px;top:%1px;width:%2px;height:%3px;background-image:url(\'%4\');z-index:1;"></div>',o,c,C,x,a.src)).find(":last"),d.attr("title")&&s.showTitle&&f.append(t('<div class="cloud-zoom-title">%0</div>',d.attr("title"))).find(":last").css("opacity",s.titleOpacity),e.browser.msie&&e.browser.version<7&&(w=e('<iframe frameborder="0" src="#"></iframe>').css({position:"absolute",left:o,top:c,zIndex:1,width:C,height:x}).insertBefore(f)),f.fadeIn(500),g&&(g.remove(),g=null),r=p.outerWidth()/a.width*f.width(),l=p.outerHeight()/a.height*f.height(),g=i.append(t("<div class = 'cloud-zoom-lens' style='display:none;z-index:98;position:absolute;width:%0px;height:%1px;'></div>",r,l)).find(":last"),m.css("cursor",g.css("cursor"));var F=!1;s.tint&&(g.css("background",'url("'+d.attr("src")+'")'),v=i.append(t('<div style="display:none;position:absolute; left:0px; top:0px; width:%0px; height:%1px; background-color:%2;" />',p.outerWidth(),p.outerHeight(),s.tint)).find(":last"),v.css("opacity",s.tintOpacity),F=!0,v.fadeIn(500)),s.softFocus&&(g.css("background",'url("'+d.attr("src")+'")'),b=i.append(t('<div style="position:absolute;display:none;top:2px; left:2px; width:%0px; height:%1px;" />',p.outerWidth()-2,p.outerHeight()-2,s.tint)).find(":last"),b.css("background",'url("'+d.attr("src")+'")'),b.css("opacity",.5),F=!0,b.fadeIn(500)),F||g.css("opacity",s.lensOpacity),"inside"!==s.position&&g.fadeIn(500),u.controlLoop()},250)})},n=new Image,e(n).load(function(){T.init2(this,0)}),n.src=d.attr("src"),o=new Image,e(o).load(function(){T.init2(this,1)}),o.src=i.attr("href")}e.fn.CloudZoom=function(t){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(s){}return this.each(function(){var s,n=e(this);if(n.is(".cloud-zoom")){n.css({position:"relative",display:"block"}),e("img",n).css({display:"block"}),"cloudzoom-wrap"!=e(this).parent().attr("id")&&e(this).wrap('<div id="cloudzoom-wrap" style="top:0px;position:relative;"></div>'),s=e.extend({},e.fn.CloudZoom.defaults,t);var o={adjustX:"int",adjustY:"int",zoomWidth:"int",zoomHeight:"int",position:"string",tint:"string",tintOpacity:"float",lensOpacity:"float",softFocus:"bool",smoothMove:"int",showTitle:"bool",titleOpacity:"float"};for(var a in o){var r=e(this).attr("data-"+a);if(r)switch(o[a]){case"int":case"float":s[a]=Number(r);break;case"bool":s[a]=Boolean(r);break;case"string":default:s[a]=r}}e(this).data("zoom",new i(e(this),s))}else e(this).is(".cloud-zoom-gallery")&&(s=e.extend({},{useZoom:e(this).attr("data-zoom-id"),smallImage:e(this).attr("data-small-image")},t),e(this).data("relOpts",s),e(this).bind("click",e(this),function(t){var i=t.data,n=i.data("relOpts");return e("#"+n.useZoom+" div.wsite-show").add("#"+n.useZoom+" div.wsite-show-init"),e("#"+n.useZoom).data("zoom").destroy(),e("#"+n.useZoom).attr("href",i.attr("href")),e("#"+n.useZoom+" img").attr("src",n.smallImage),e("#"+n.useZoom).CloudZoom(s),!1}))}),this},e.fn.CloudZoom.defaults={zoomWidth:"auto",zoomHeight:"auto",position:"right",tint:!1,tintOpacity:.5,lensOpacity:.5,softFocus:!1,smoothMove:3,showTitle:!0,titleOpacity:.5,adjustX:0,adjustY:0}}(jQuery),_wAMD.define("vendor/cloud-zoom.1.0.2",function(){}),_wAMD.define("util/general-utils",[],function(){var e={htmlDecode:function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},isIE:function(){return/(MSIE|Trident)/.test(navigator.userAgent)},isChrome:function(){return/(Chrome)/.test(navigator.userAgent)},getURLParameter:function(e){for(var t=window.location.search.substring(1),i=t.split("&"),s=0;s<i.length;s++){var n=i[s].split("=");if(n[0]==e)return decodeURIComponent(n[1])}return""},splitName:function(e){var t;return/^[^\s]*\s[^\s]*\s?$/i.test(e)?e.split(" "):(t=e.match(/^([^\s]*\s[^\s]\.?)\s(.*)\s?$/i))?t.slice(1):(t=e.match(/^(.*)\s([^\s]*)\s(jr|sr|ii|iii|iv|v|vi|vii|viii|ix|x)\.?\s?$/i))?t.slice(1):(t=e.match(/^([^\s]*\s[^\s]*)\s(.*)\s?$/i))?t.slice(1):[e,""]},isValidEmail:function(e){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},numberWithCommas:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},getSiteDomain:function(){var e=!1;return Weebly.Location.custom_domain?e=Weebly.Location.custom_domain:Weebly.Location.weebly_subdomain&&(e=Weebly.Location.weebly_subdomain+".weebly.com"),e},generateTimeInterval:function(e,t){var i,s,n=[],e=e||12,t=t||30;for(i=0;23>=i;i++)for(s=0;60>s;s+=t){var o=("00"+s).slice(-2),a=i,r="";12===e?(r="am",0===i?a=12:12===i?(a=i,r="pm"):i>12&&(a=i-e,r="pm")):a=("00"+i).slice(-2),n.push(a+":"+o+" "+r)}return n},hasValidScheme:function(e){var t=["aaa","aaas","about","acap","acct","acr","adiumxtra","afp","afs","aim","apt","attachment","aw","barion","beshare","bitcoin","bolo","callto","cap","chrome","chrome-extension","cid","coap","coaps","com-eventbrite-attendee","content","crid","cvs","data","dav","dict","dlna-playcontainer","dlna-playsingle","dns","dtn","dvb","ed2k","example","facetime","fax","feed","feedready","file","finger","fish","ftp","geo","gg","git","gizmoproject","go","gopher","gtalk","h323","ham","hcp","http","https","iax","icap","icon","im","imap","info","ipn","ipp","ipps","irc","irc6","ircs","iris","iris.beep","iris.lwz","iris.xpc","iris.xpcs","itms","jabber","jar","jms","keyparc","lastfm","ldap","ldaps","magnet","mailserver","mailto","maps","market","message","mid","mms","modem","ms-help","ms-settings-cloudstorage","ms-settings-power","msnim","msrp","msrps","mtqp","mumble","mupdate","mvn","news","nfs","ni","nih","nntp","notes","oid","opaquelocktoken","pack","palm","paparazzi","pkcs11","platform","pop","pres","prospero","proxy","psyc","query","reload","res","resource","rmi","rsync","rtmfp","rtmp","rtsp","rtsps","rtspu","secondlife","service","session","sftp","sgn","shttp","sieve","sip","sips","skype","smb","sms","smtp","snews","snmp","soap.beep","soap.beeps","soldat","spotify","ssh","steam","stun","stuns","submit","svn","tag","teamspeak","tel","teliaeid","telnet","tftp","things","thismessage","tip","tn3270","turn","turns","tv","udp","unreal","urn","ut2004","vemmi","ventrilo","videotex","view-source","wais","webcal","ws","wss","wtai","wyciwyg","xcon","xcon-userid","xfire","xmlrpc.beep","xmlrpc.beeps","xmpp","xri","ymsgr","z39.50","z39.50r","z39.50s"],i=e.split(":");return 1==i.length?!1:-1==t.indexOf(i[0])?!1:!0},isCyclic:function(e){function t(e){if(!e||"object"!=typeof e)return!1;if(-1!==i.indexOf(e))return!0;i.push(e);for(var s in e)if(e.hasOwnProperty(s)&&t(e[s]))return!0;return!1}var i=[];return t(e)}};return e}),_wAMD.define("util/backbone-validators",["backbone-all","util/general-utils"],function(e,t){_.extend(e.Validation.validators,{"in":function(){return e.Validation.validators.oneOf.apply(this,arguments)},email:function(e,i,s){return t.isValidEmail(e)?void 0:this.format(_W.tl("{0} is not a valid E-mail address","Value"),this.formatLabel(i,s))},maxlength:e.Validation.validators.maxLength,minlength:e.Validation.validators.minLength}),_.extend(e.Validation.messages,{required:_W.tl("{0} is required","Value"),acceptance:_W.tl("{0} must be accepted","Value"),min:_W.tl("{0} must be greater than or equal to {1}","Value, Min"),max:_W.tl("{0} must be less than or equal to {1}","Value, Max"),range:_W.tl("{0} must be between {1} and {2}","Value, Min, Max"),length:_W.tl("{0} must be {1} characters","Value, Length"),minLength:_W.tl("{0} must be at least {1} characters","Value, Min"),maxLength:_W.tl("{0} must be at most {1} characters","Value, Max"),rangeLength:_W.tl("{0} must be between {1} and {2} characters","Value, min, max"),oneOf:_W.tl("{0} must be one of: {1}","Value, type"),equalTo:_W.tl("{0} must be the same as {1}","Value, Comparator"),digits:_W.tl("{0} must only contain digits","Value"),number:_W.tl("{0} must be a number","Value"),"int":_W.tl("{0} must be a whole number","Value"),email:_W.tl("{0} must be a valid email","Value"),url:_W.tl("{0} must be a valid url","Value"),domain:_W.tl("{0} must be a valid domain","Value"),inlinePattern:_W.tl("{0} is invalid","Value")})}),function(e){e.Event.prototype.stop=function(){this.preventDefault(),this.stopPropagation()},e.fn.extend({getValue:function(){var e=this;return"checkbox"===e.attr("type")||"radio"===e.attr("type")?e.prop("checked"):e.is(":input")?e.val():e.html()},setValue:function(e){var t=this;return"checkbox"===t.attr("type")||"radio"===t.attr("type")?t.prop("checked",!!e):t.is(":input")?t.val(null==e||void 0==e?"":e):t.html("string"==typeof e?e:""),t},getValues:function(t){t=t||"";var i={};return this.find(":input,.input").each(function(){var s=e(this),n=s.attr("name")||s.attr("id");n&&0===n.indexOf(t)&&(n=n.substring(t.length),i[n]=s.getValue())}),i},setValues:function(t,i){return i=i||"",this.find(":input,.input").each(function(){var s=e(this),n=s.attr("name")||s.attr("id");n&&0===n.indexOf(i)&&(n=n.substring(i.length),s.setValue(t[n]))}),this},equals:function(e){return this.data()===e.data()},padInput:function(t){var i,s="auto",n="auto";return t=t||"all",this.each(function(o,a){i=e(a),("ns"===t||"all"===t)&&(s=Math.floor((i.parent().height()-i.height())/2)),("ew"===t||"all"===t)&&(n=Math.floor((i.parent().width()-i.width())/2)),i.css({"padding-top":s,"padding-right":n,"padding-bottom":s,"padding-left":n})}),this}})}(Weebly.jQuery),"undefined"==typeof JSON&&(JSON={stringify:Object.toJSON,parse:function(e){return(e||"").evalJSON()}}),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,i=Array.prototype.slice.call(arguments,1);return function(){var s=Array.prototype.slice.call(arguments);return t.apply(e,i.concat(s))}}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var i=0,s=this.length;s>i;++i)i in this&&e.call(t,this[i],i,this)}),Array.prototype.find||(Array.prototype.find=function(e,t){for(var i=0,s=this.length;s>i;++i){var n=this[i];if(e.call(t,n))return n}return null}),Array.prototype.push||(Array.prototype.push=function(e){this[this.length]=e}),Array.prototype.remove||(Array.prototype.remove=function(e,t){var i=this.slice((t||e)+1||this.length);return this.length=0>e?this.length+e:e,this.push.apply(this,i)}),String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,i){return"undefined"!=typeof e[i]?e[i]:t})},_wAMD.define("util/misc",function(){}),function(e){"function"==typeof _wAMD.define&&_wAMD.define.amd?_wAMD.define("util/ui/wSpinner",["jquery"],e):e(window.jQuery)}(function(e){"undefined"==typeof e.fn.wSpinner&&e.fn.extend({wSpinner:function(t){function i(){t.incrementElement||t.decrementElement?(u=e(t.incrementElement),d=e(t.decrementElement)):(c=e('<div class="'+t.className+'" />').addClass(t.theme),h=e('<div class="'+t.className+'-controls" />'),u=e('<a class="'+t.className+'-up" />'),d=e('<a class="'+t.className+'-down" />'),h.append(u,d),l.wrap(c).addClass(t.className+"-input").parent().append(h).css({height:t.height||"auto"})),l.on({keypress:function(e){var t=e.keyCode||e.which;return t>47&&58>t||8===t||9===t||37===t||39===t||e.metaKey?!0:!1},keydown:function(t){var i=e(t.currentTarget);38===t.which?n(i):40===t.which&&o(i)},blur:function(e){var t=e.currentTarget;t.getAttribute("data-max")&&parseInt(t.value)>parseInt(t.getAttribute("data-max"))?t.value=t.getAttribute("data-max"):""===t.value&&(t.value=1)},change:function(t){var i=e(t.currentTarget);r(i)&&a()}}),u.on({click:function(){clearInterval(p),n(l)},mousedown:function(t){e(t.currentTarget).addClass("wsite-active"),p=setInterval(function(){n(l)},250),t.preventDefault()},mouseup:function(e){s(e.currentTarget)},mouseout:function(e){s(e.currentTarget)}}),d.on({click:function(){clearInterval(p),o(l)},mousedown:function(t){e(t.currentTarget).addClass("wsite-active"),p=setInterval(function(){o(l)},250),t.preventDefault()},mouseup:function(e){s(e.currentTarget)},mouseout:function(e){s(e.currentTarget)}})}function s(t){e(t).removeClass("wsite-active"),clearInterval(p)}function n(e){if(!e.is(":disabled")){var i=parseInt(e.val());isNaN(i)&&t.defaultVal&&(i=t.defaultVal);var s=i+t.interval;e.val(Math.min(s,parseInt(e.attr("data-max"))||t.max)).focus(),a()}}function o(e){if(!e.is(":disabled")){var i=parseInt(e.val());isNaN(i)&&t.defaultVal&&(i=t.defaultVal);var s=i-t.interval;e.val(Math.max(s,parseInt(e.data("data-min"))||t.min)).focus(),a()}}function a(){t.onChange&&t.onChange.call(l[0])}function r(e){if(e.is(":disabled"))return!1;var i=parseInt(e.val());return isNaN(i)?(i=void 0!=t.defaultVal?t.defaultVal:t.min,e.val(i)):i<parseInt(e.attr("data-min")||t.min)?e.val(t.min):i>parseInt(e.attr("data-max")||t.max)&&e.val(t.max),!0}var l,c,h,u,d,p,f={className:"wsite-spinner",height:void 0,min:1,max:1/0,theme:"light",interval:1};return t=e.extend(f,t),this.each(function(t,s){l=e(s),"INPUT"===s.nodeName&&i()}),this},wControlSpinner:function(t){t=t||{},this.each(function(){var i=e(this),s=e.extend({},t);s.incrementElement=i.parent().find(".spinner-inc"),s.decrementElement=i.parent().find(".spinner-dec"),s.defaultVal=14,i.wSpinner(s)})}})}),function(e){"undefined"==typeof e.fn.each2&&e.fn.extend({each2:function(t){for(var i=e([0]),s=-1,n=this.length;++s<n&&(i.context=i[0]=this[s])&&t.call(i[0],s,i)!==!1;);return this}})}(jQuery),function(e,t){function i(e,t){for(var i=0,s=t.length;s>i;i+=1)if(n(e,t[i]))return i;return-1}function s(){var t=e(_);t.appendTo("body");var i={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),i}function n(e,i){return e===i?!0:e===t||i===t?!1:null===e||null===i?!1:e.constructor===String?e+""==i+"":i.constructor===String?i+""==e+"":!1}function o(t,i){var s,n,o;if(null===t||t.length<1)return[];for(s=t.split(i),n=0,o=s.length;o>n;n+=1)s[n]=e.trim(s[n]);return s}function a(e){return e.outerWidth(!1)-e.width()}function r(i){var s="keyup-change-value";i.on("keydown",function(){e.data(i,s)===t&&e.data(i,s,i.val())}),i.on("keyup",function(){var n=e.data(i,s);n!==t&&i.val()!==n&&(e.removeData(i,s),i.trigger("keyup-change"))})}function l(i){i.on("mousemove",function(i){var s=R;(s===t||s.x!==i.pageX||s.y!==i.pageY)&&e(i.target).trigger("mousemove-filtered",i)})}function c(e,i,s){s=s||t;var n;return function(){var t=arguments;window.clearTimeout(n),n=window.setTimeout(function(){i.apply(s,t)},e)}}function h(e){var t,i=!1;return function(){return i===!1&&(t=e(),i=!0),t}}function u(e,t){var s=c(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){i(e.target,t.get())>=0&&s(e)})}function d(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,i=e[0],s=e.val().length;e.focus(),e.is(":visible")&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(s,s):i.createTextRange&&(t=i.createTextRange(),t.collapse(!1),t.select()))},0)}function p(t){t=e(t)[0];var i=0,s=0;if("selectionStart"in t)i=t.selectionStart,s=t.selectionEnd-i;else if("selection"in document){t.focus();var n=document.selection.createRange();s=document.selection.createRange().text.length,n.moveStart("character",-t.value.length),i=n.text.length-s}return{offset:i,length:s}}function f(e){e.preventDefault(),e.stopPropagation()}function m(e){e.preventDefault(),e.stopImmediatePropagation()}function g(t){if(!M){var i=t[0].currentStyle||window.getComputedStyle(t[0],null);M=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),M.attr("class","select2-sizer"),e("body").append(M)}return M.text(t.val()),M.width()}function v(t,i,s){var n,o,a=[];n=t.attr("class"),n&&(n=""+n,e(n.split(" ")).each2(function(){0===this.indexOf("select2-")&&a.push(this)})),n=i.attr("class"),n&&(n=""+n,e(n.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(o=s(this),o&&a.push(this))})),t.attr("class",a.join(" "))}function b(e,t,i,s){var n=e.toUpperCase().indexOf(t.toUpperCase()),o=t.length;return 0>n?(i.push(s(e)),void 0):(i.push(s(e.substring(0,n))),i.push("<span class='select2-match'>"),i.push(s(e.substring(n,n+o))),i.push("</span>"),i.push(s(e.substring(n+o,e.length))),void 0)}function w(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function y(i){var s,n=0,o=null,a=i.quietMillis||100,r=i.url,l=this;return function(c){window.clearTimeout(s),s=window.setTimeout(function(){n+=1;var s=n,a=i.data,h=r,u=i.transport||e.fn.select2.ajaxDefaults.transport,d={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||t,dataType:i.dataType||"json"},p=e.extend({},e.fn.select2.ajaxDefaults.params,d);a=a?a.call(l,c.term,c.page,c.context):null,h="function"==typeof h?h.call(l,c.term,c.page,c.context):h,o&&o.abort(),i.params&&(e.isFunction(i.params)?e.extend(p,i.params.call(l)):e.extend(p,i.params)),e.extend(p,{url:h,dataType:i.dataType,data:a,success:function(e){if(!(n>s)){var t=i.results(e,c.page);c.callback(t)}}}),o=u.call(l,p)},a)}}function C(t){var i,s,n=t,o=function(e){return""+e.text};e.isArray(n)&&(s=n,n={results:s}),e.isFunction(n)===!1&&(s=n,n=function(){return s});var a=n();return a.text&&(o=a.text,e.isFunction(o)||(i=a.text,o=function(e){return e[i]})),function(t){var i,s=t.term,a={results:[]};return""===s?(t.callback(n()),void 0):(i=function(n,a){var r,l;if(n=n[0],n.children){r={};for(l in n)n.hasOwnProperty(l)&&(r[l]=n[l]);r.children=[],e(n.children).each2(function(e,t){i(t,r.children)}),(r.children.length||t.matcher(s,o(r),n))&&a.push(r)}else t.matcher(s,o(n),n)&&a.push(n)},e(n().results).each2(function(e,t){i(t,a.results)}),t.callback(a),void 0)}}function x(i){var s=e.isFunction(i);return function(n){var o=n.term,a={results:[]};e(s?i():i).each(function(){var e=this.text!==t,i=e?this.text:this;(""===o||n.matcher(o,i))&&a.results.push(e?this:{id:this,text:this})}),n.callback(a)}}function S(t,i){if(e.isFunction(t))return!0;if(!t)return!1;throw new Error(i+" must be a function or a falsy value")}function F(t){return e.isFunction(t)?t():t}function E(t){var i=0;return e.each(t,function(e,t){t.children?i+=E(t.children):i++}),i}function k(e,i,s,o){var a,r,l,c,h,u=e,d=!1;if(!o.createSearchChoice||!o.tokenSeparators||o.tokenSeparators.length<1)return t;for(;;){for(r=-1,l=0,c=o.tokenSeparators.length;c>l&&(h=o.tokenSeparators[l],r=e.indexOf(h),!(r>=0));l++);if(0>r)break;if(a=e.substring(0,r),e=e.substring(r+h.length),a.length>0&&(a=o.createSearchChoice.call(this,a,i),a!==t&&null!==a&&o.id(a)!==t&&null!==o.id(a))){for(d=!1,l=0,c=i.length;c>l;l++)if(n(o.id(a),o.id(i[l]))){d=!0;break}d||s(a)}}return u!==e?e:void 0}function T(t,i){var s=function(){};return s.prototype=new t,s.prototype.constructor=s,s.prototype.parent=t.prototype,s.prototype=e.extend(s.prototype,i),s}if(window.Select2===t){var D,I,O,A,P,M,W,z,R={x:0,y:0},D={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case D.LEFT:case D.RIGHT:case D.UP:case D.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case D.SHIFT:case D.CTRL:case D.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},_="<div class='select2-measure-scrollbar'></div>";W=e(document),P=function(){var e=1;return function(){return e++}}(),W.on("mousemove",function(e){R.x=e.pageX,R.y=e.pageY}),I=T(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(i){var n,o,a,c,d=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==t&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+P()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=h(function(){return i.element.closest("body")}),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.css(F(i.containerCss)),this.container.addClass(F(i.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(F(i.dropdownCssClass)),this.dropdown.data("select2",this),this.results=n=this.container.find(d),this.search=o=this.container.find("input.select2-input"),this.resultsPage=0,this.context=null,this.initContainer(),l(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",d,this.bind(this.highlightUnderEvent)),u(80,this.results),this.dropdown.on("scroll-debounced",d,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&n.mousewheel(function(e,t,i,s){var o=n.scrollTop();s>0&&0>=o-s?(n.scrollTop(0),f(e)):0>s&&n.get(0).scrollHeight-n.scrollTop()+s<=n.height()&&(n.scrollTop(n.get(0).scrollHeight-n.height()),f(e))}),r(o),o.on("keyup-change input paste",this.bind(this.updateResults)),o.on("focus",function(){o.addClass("select2-focused")}),o.on("blur",function(){o.removeClass("select2-focused")}),this.dropdown.on("mouseup",d,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var a=i.element.prop("disabled");a===t&&(a=!1),this.enable(!a);var c=i.element.prop("readonly");c===t&&(c=!1),this.readonly(c),z=z||s(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus()},destroy:function(){var e=this.opts.element,i=e.data("select2");this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),i!==t&&(i.container.remove(),i.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show())},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:n(e.attr("locked"),"locked")||n(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(i){var s,a,r,l,c=this;if(s=i.element,"select"===s.get(0).tagName.toLowerCase()&&(this.select=a=i.element),a&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=e.extend({},{populateResults:function(s,n,o){var a,r=this.opts.id;a=function(s,n,l){var h,u,d,p,f,m,g,v,b,w;for(s=i.sortResults(s,n,o),h=0,u=s.length;u>h;h+=1)d=s[h],f=d.disabled===!0,p=!f&&r(d)!==t,m=d.children&&d.children.length>0,g=e("<li></li>"),g.addClass("select2-results-dept-"+l),g.addClass("select2-result"),g.addClass(p?"select2-result-selectable":"select2-result-unselectable"),f&&g.addClass("select2-disabled"),m&&g.addClass("select2-result-with-children"),g.addClass(c.opts.formatResultCssClass(d)),v=e(document.createElement("div")),v.addClass("select2-result-label"),w=i.formatResult(d,v,o,c.opts.escapeMarkup),w!==t&&v.html(w),g.append(v),m&&(b=e("<ul></ul>"),b.addClass("select2-result-sub"),a(d.children,b,l+1),g.append(b)),g.data("select2-data",d),n.append(g)},a(n,s,0)}},e.fn.select2.defaults,i),"function"!=typeof i.id&&(r=i.id,i.id=function(e){return e[r]}),e.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(a?(i.query=this.bind(function(e){var i,n,o,a={results:[],more:!1},r=e.term;o=function(t,i){var s;t.is("option")?e.matcher(r,t.text(),t)&&i.push(c.optionToData(t)):t.is("optgroup")&&(s=c.optionToData(t),t.children().each2(function(e,t){o(t,s.children)}),s.children.length>0&&i.push(s))},i=s.children(),this.getPlaceholder()!==t&&i.length>0&&(n=this.getPlaceholderOption(),n&&(i=i.not(n))),i.each2(function(e,t){o(t,a.results)}),e.callback(a)}),i.id=function(e){return e.id},i.formatResultCssClass=function(e){return e.css}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=y.call(i.element,i.ajax)):"data"in i?i.query=C(i.data):"tags"in i&&(i.query=x(i.tags),i.createSearchChoice===t&&(i.createSearchChoice=function(e){return{id:e,text:e}}),i.initSelection===t&&(i.initSelection=function(t,s){var a=[];e(o(t.val(),i.separator)).each(function(){var t=this,s=this,o=i.tags;e.isFunction(o)&&(o=o()),e(o).each(function(){return n(this.id,t)?(s=this.text,!1):void 0}),a.push({id:t,text:s})}),s(a)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");return i},monitorSource:function(){var e,i=this.opts.element;i.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),e=this.bind(function(){var e,s=i.prop("disabled");s===t&&(s=!1),this.enable(!s);var e=i.prop("readonly");e===t&&(e=!1),this.readonly(e),v(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(F(this.opts.containerCssClass)),v(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(F(this.opts.dropdownCssClass))}),i.on("propertychange.select2 DOMAttrModified.select2",e),this.mutationCallback===t&&(this.mutationCallback=function(t){t.forEach(e)}),"undefined"!=typeof WebKitMutationObserver&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new WebKitMutationObserver(this.mutationCallback),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var i=e.Event("select2-selecting",{val:this.id(t),object:t});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()
},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){return e===t&&(e=!0),this._enabled===e?!1:(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface(),!0)},readonly:function(e){return e===t&&(e=!1),this._readonly===e?!1:(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface(),!0)},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var t,i,s,n,o=this.dropdown,a=this.container.offset(),r=this.container.outerHeight(!1),l=this.container.outerWidth(!1),c=o.outerHeight(!1),h=e(window).scrollLeft()+e(window).width(),u=e(window).scrollTop()+e(window).height(),d=a.top+r,p=a.left,f=u>=d+c,m=a.top-c>=this.body().scrollTop(),g=o.outerWidth(!1),v=h>=p+g,b=o.hasClass("select2-drop-above");this.opts.dropdownAutoWidth?(n=e(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),g=o.outerWidth(!1)+(n.scrollHeight===n.clientHeight?0:z.width),g>l?l=g:g=l,v=h>=p+g):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body().css("position")&&(t=this.body().offset(),d-=t.top,p-=t.left),b?(i=!0,!m&&f&&(i=!1)):(i=!1,!f&&m&&(i=!0)),v||(p=a.left+l-g),i?(d=a.top-c,this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),s=e.extend({top:d,left:p,width:l},F(this.opts.dropdownCss)),o.css(s)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){function t(){return{width:Math.max(document.documentElement.scrollWidth,e(window).width()),height:Math.max(document.documentElement.scrollHeight,e(window).height())}}var i,s,n=this.containerId,o="scroll."+n,a="resize."+n,r="orientationchange."+n;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),i=e("#select2-drop-mask"),0==i.length&&(i=e(document.createElement("div")),i.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),i.hide(),i.appendTo(this.body()),i.on("mousedown touchstart click",function(t){var i,s=e("#select2-drop");s.length>0&&(i=s.data("select2"),i.opts.selectOnBlur&&i.selectHighlighted({noFocus:!0}),i.close(),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==i[0]&&this.dropdown.before(i),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),s=t(),i.css(s).show(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var l=this;this.container.parents().add(window).each(function(){e(this).on(a+" "+o+" "+r,function(){var i=t();e("#select2-drop-mask").css(i),l.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerId,i="scroll."+t,s="resize."+t,n="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(i).off(s).off(n)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return F(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var t,i,s,n,o,a,r,l=this.results;if(i=this.highlight(),!(0>i)){if(0==i)return l.scrollTop(0),void 0;t=this.findHighlightableChoices().find(".select2-result-label"),s=e(t[i]),n=s.offset().top+s.outerHeight(!0),i===t.length-1&&(r=l.find("li.select2-more-results"),r.length>0&&(n=r.offset().top+r.outerHeight(!0))),o=l.offset().top+l.outerHeight(!0),n>o&&l.scrollTop(l.scrollTop()+(n-o)),a=s.offset().top-l.offset().top,0>a&&"none"!=s.css("display")&&l.scrollTop(l.scrollTop()+a)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-selected):not(.select2-disabled)")},moveHighlight:function(t){for(var i=this.findHighlightableChoices(),s=this.highlight();s>-1&&s<i.length;){s+=t;var n=e(i[s]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(s);break}}},highlight:function(t){var s,n,o=this.findHighlightableChoices();return 0===arguments.length?i(o.filter(".select2-highlighted")[0],o.get()):(t>=o.length&&(t=o.length-1),0>t&&(t=0),this.results.find(".select2-highlighted").removeClass("select2-highlighted"),s=e(o[t]),s.addClass("select2-highlighted"),this.ensureHighlightVisible(),n=s.data("select2-data"),n&&this.opts.element.trigger({type:"select2-highlight",val:this.id(n),choice:n}),void 0)},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var i=e(t.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var s=this.findHighlightableChoices();this.highlight(s.index(i))}else 0==i.length&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var e,t=this.results,i=t.find("li.select2-more-results"),s=this.resultsPage+1,n=this,o=this.search.val(),a=this.context;0!==i.length&&(e=i.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:s,context:a,matcher:this.opts.matcher,callback:this.bind(function(e){n.opened()&&(n.opts.populateResults.call(this,t,e.results,{term:o,page:s,context:a}),n.postprocessResults(e,!1,!1),e.more===!0?(i.detach().appendTo(t).text(n.opts.formatLoadMore(s+1)),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):i.remove(),n.positionDropdown(),n.resultsPage=s,n.context=e.context)})})))},tokenize:function(){},updateResults:function(i){function s(){l.removeClass("select2-active"),u.positionDropdown()}function o(e){c.html(e),s()}var a,r,l=this.search,c=this.results,h=this.opts,u=this,d=l.val(),p=e.data(this.container,"select2-last-term");if((i===!0||!p||!n(d,p))&&(e.data(this.container,"select2-last-term",d),i===!0||this.showSearchInput!==!1&&this.opened())){var f=this.getMaximumSelectionSize();if(f>=1&&(a=this.data(),e.isArray(a)&&a.length>=f&&S(h.formatSelectionTooBig,"formatSelectionTooBig")))return o("<li class='select2-selection-limit'>"+h.formatSelectionTooBig(f)+"</li>"),void 0;if(l.val().length<h.minimumInputLength)return S(h.formatInputTooShort,"formatInputTooShort")?o("<li class='select2-no-results'>"+h.formatInputTooShort(l.val(),h.minimumInputLength)+"</li>"):o(""),i&&this.showSearch&&this.showSearch(!0),void 0;if(h.maximumInputLength&&l.val().length>h.maximumInputLength)return S(h.formatInputTooLong,"formatInputTooLong")?o("<li class='select2-no-results'>"+h.formatInputTooLong(l.val(),h.maximumInputLength)+"</li>"):o(""),void 0;h.formatSearching&&0===this.findHighlightableChoices().length&&o("<li class='select2-searching'>"+h.formatSearching()+"</li>"),l.addClass("select2-active"),r=this.tokenize(),r!=t&&null!=r&&l.val(r),this.resultsPage=1,h.query({element:h.element,term:l.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(a){var r;return this.opened()?(this.context=a.context===t?null:a.context,this.opts.createSearchChoice&&""!==l.val()&&(r=this.opts.createSearchChoice.call(u,l.val(),a.results),r!==t&&null!==r&&u.id(r)!==t&&null!==u.id(r)&&0===e(a.results).filter(function(){return n(u.id(this),u.id(r))}).length&&a.results.unshift(r)),0===a.results.length&&S(h.formatNoMatches,"formatNoMatches")?(o("<li class='select2-no-results'>"+h.formatNoMatches(l.val())+"</li>"),void 0):(c.empty(),u.opts.populateResults.call(this,c,a.results,{term:l.val(),page:this.resultsPage,context:null}),a.more===!0&&S(h.formatLoadMore,"formatLoadMore")&&(c.append("<li class='select2-more-results'>"+u.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){u.loadMoreIfNeeded()},10)),this.postprocessResults(a,i),s(),this.opts.element.trigger({type:"select2-loaded",items:a}),void 0)):(this.search.removeClass("select2-active"),void 0)})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){d(this.search)},selectHighlighted:function(e){var t=this.highlight(),i=this.results.find(".select2-highlighted"),s=i.closest(".select2-result").data("select2-data");s?(this.highlight(t),this.onSelect(s,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var e=this.select.children().first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&e||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.text()&&""===e.val())return e}},initContainerWidth:function(){function i(){var i,s,n,o,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(i=this.opts.element.attr("style"),i!==t)for(s=i.split(";"),o=0,a=s.length;a>o;o+=1)if(n=s[o].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==n&&n.length>=1)return n[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var s=i.call(this);null!==s&&this.container.css("width",s)}}),O=T(I,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='icon'>downarrowsmall<b></b></span>","</a>","<input class='select2-focusser select2-offscreen' type='text'/>","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var t,i,s;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.search.focus(),t=this.search.get(0),t.createTextRange?(i=t.createTextRange(),i.collapse(!1),i.select()):t.setSelectionRange&&(s=this.search.val().length,t.setSelectionRange(s,s)),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.removeAttr("disabled"),this.focusser.focus()},initContainer:function(){var t,i=this.container,s=this.dropdown;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=i.find(".select2-choice"),this.focusser=i.find(".select2-focusser"),this.focusser.attr("id","s2id_autogen"+P()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id")),this.focusser.attr("tabindex",this.elementTabIndex),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){if(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)return f(e),void 0;switch(e.which){case D.UP:case D.DOWN:return this.moveHighlight(e.which===D.UP?-1:1),f(e),void 0;case D.ENTER:return this.selectHighlighted(),f(e),void 0;case D.TAB:return this.selectHighlighted({noFocus:!0}),void 0;case D.ESC:return this.cancel(e),f(e),void 0}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==D.TAB&&!D.isControl(e)&&!D.isFunctionKey(e)&&e.which!==D.ESC){if(this.opts.openOnEnter===!1&&e.which===D.ENTER)return f(e),void 0;if(e.which==D.DOWN||e.which==D.UP||e.which==D.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),f(e),void 0}return e.which==D.DELETE||e.which==D.BACKSPACE?(this.opts.allowClear&&this.clear(),f(e),void 0):void 0}})),r(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),m(e),this.close(),this.selection.focus())})),t.on("mousedown",this.bind(function(t){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),f(t)})),s.on("mousedown",this.bind(function(){this.search.focus()})),t.on("focus",this.bind(function(e){f(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var t=this.selection.data("select2-data");if(t){var i=this.getPlaceholderOption();this.opts.element.val(i?i.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection([]),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var e;return(e=this.getPlaceholderOption())!==t&&e.is(":selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val()},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var s=e.find(":selected");t(i.optionToData(s))}:"data"in t&&(t.initSelection=t.initSelection||function(i,s){var o=i.val(),a=null;t.query({matcher:function(e,i,s){var r=n(o,t.id(s));return r&&(a=s),r},callback:e.isFunction(s)?function(){s(a)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,i){var s=0,o=this;if(this.findHighlightableChoices().each2(function(e,t){return n(o.id(t.data("select2-data")),o.opts.element.val())?(s=e,!1):void 0}),i!==!1&&(t===!0&&s>=0?this.highlight(s):this.highlight(0)),t===!0){var a=this.opts.minimumResultsForSearch;a>=0&&this.showSearch(E(e.results)>=a)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var i=this.opts.element.val(),s=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.close(),t&&t.noFocus||this.selection.focus(),n(i,this.id(e))||this.triggerChange({added:e,removed:s})}},updateSelection:function(e){var i,s,n=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),n.empty(),i=this.opts.formatSelection(e,n,this.opts.escapeMarkup),i!==t&&n.append(i),s=this.opts.formatSelectionCssClass(e,n),s!==t&&n.addClass(s),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,i=!1,s=null,n=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(e).find(":selected").each2(function(e,t){return s=n.optionToData(t),!1}),this.updateSelection(s),this.setPlaceholder(),i&&this.triggerChange({added:s,removed:o});else{if(!e&&0!==e)return this.clear(i),void 0;if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){n.opts.element.val(e?n.id(e):""),n.updateSelection(e),n.setPlaceholder(),i&&n.triggerChange({added:e,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e,i){var s;return 0===arguments.length?(s=this.selection.data("select2-data"),s==t&&(s=null),s):(e&&""!==e?(s=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:s})):this.clear(i),void 0)}}),A=T(I,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitilize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var s=[];e.find(":selected").each2(function(e,t){s.push(i.optionToData(t))}),t(s)}:"data"in t&&(t.initSelection=t.initSelection||function(i,s){var a=o(i.val(),t.separator),r=[];t.query({matcher:function(i,s,o){var l=e.grep(a,function(e){return n(e,t.id(o))}).length;return l&&r.push(o),l},callback:e.isFunction(s)?function(){for(var e=[],i=0;i<a.length;i++)for(var o=a[i],l=0;l<r.length;l++){var c=r[l];if(n(o,t.id(c))){e.push(c),r.splice(l,1);break}}s(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},initContainer:function(){var t,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(i);var s=this;this.selection.on("mousedown",".select2-search-choice",function(){s.search[0].focus(),s.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+P()),e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var i=t.find(".select2-search-choice-focus"),s=i.prev(".select2-search-choice:not(.select2-locked)"),n=i.next(".select2-search-choice:not(.select2-locked)"),o=p(this.search);if(i.length&&(e.which==D.LEFT||e.which==D.RIGHT||e.which==D.BACKSPACE||e.which==D.DELETE||e.which==D.ENTER)){var a=i;return e.which==D.LEFT&&s.length?a=s:e.which==D.RIGHT?a=n.length?n:null:e.which===D.BACKSPACE?(this.unselect(i.first()),this.search.width(10),a=s.length?s:n):e.which==D.DELETE?(this.unselect(i.first()),this.search.width(10),a=n.length?n:null):e.which==D.ENTER&&(a=null),this.selectChoice(a),f(e),a&&a.length||this.open(),void 0}if((e.which===D.BACKSPACE&&1==this.keydowns||e.which==D.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),f(e),void 0;if(this.selectChoice(null),this.opened())switch(e.which){case D.UP:case D.DOWN:return this.moveHighlight(e.which===D.UP?-1:1),f(e),void 0;case D.ENTER:return this.selectHighlighted(),f(e),void 0;case D.TAB:return this.selectHighlighted({noFocus:!0}),this.close(),void 0;case D.ESC:return this.cancel(e),f(e),void 0}if(e.which!==D.TAB&&!D.isControl(e)&&!D.isFunctionKey(e)&&e.which!==D.BACKSPACE&&e.which!==D.ESC){if(e.which===D.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===D.PAGE_UP||e.which===D.PAGE_DOWN)&&f(e),e.which===D.ENTER&&f(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",i,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",i,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==t&&null!==i&&(e.updateSelection(i),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),i=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.updateResults(!0),this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var s=[],n=[],o=this;e(t).each(function(){i(o.id(this),s)<0&&(s.push(o.id(this)),n.push(this))}),t=n,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,t){this.triggerSelect(e)&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),t&&t.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var s,n,o=!i.locked,a=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?a:r,c=this.id(i),h=this.getVal();s=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup),s!=t&&l.find("div").replaceWith("<div>"+s+"</div>"),n=this.opts.formatSelectionCssClass(i,l.find("div")),n!=t&&l.addClass(n),o&&l.find(".select2-search-choice-close").on("mousedown",f).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.close(),this.focusSearch()})).dequeue(),f(t))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",i),l.insertBefore(this.searchContainer),h.push(c),this.setVal(h)},unselect:function(e){var t,s,n=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";t=e.data("select2-data"),t&&(s=i(this.id(t),n),s>=0&&(n.splice(s,1),this.setVal(n),this.select&&this.postprocessResults()),e.remove(),this.opts.element.trigger({type:"removed",val:this.id(t),choice:t}),this.triggerChange({removed:t}))},postprocessResults:function(e,t,s){var n=this.getVal(),o=this.results.find(".select2-result"),a=this.results.find(".select2-result-with-children"),r=this;o.each2(function(e,t){var s=r.id(t.data("select2-data"));i(s,n)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),a.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&s!==!1&&r.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&S(r.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+r.opts.formatNoMatches(r.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-a(this.search)},resizeSearch:function(){var e,t,i,s,n,o=a(this.search);e=g(this.search)+10,t=this.search.offset().left,i=this.selection.width(),s=this.selection.offset().left,n=i-(t-s)-o,e>n&&(n=i-o),40>n&&(n=i-o),0>=n&&(n=e),this.search.width(n)},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),o(e,this.opts.separator))},setVal:function(t){var s;this.select?this.select.val(t):(s=[],e(t).each(function(){i(this,s)<0&&s.push(this)}),this.opts.element.val(0===s.length?"":s.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),i=0;i<t.length;i++)for(var s=0;s<e.length;s++)n(this.opts.id(t[i]),this.opts.id(e[s]))&&(t.splice(i,1),i--,e.splice(s,1),s--);return{added:t,removed:e}},val:function(i,s){var n,o=this;if(0===arguments.length)return this.getVal();if(n=this.data(),n.length||(n=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),s&&this.triggerChange({added:this.data(),removed:n}),void 0;if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),s&&this.triggerChange(this.buildChangeDetails(n,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var i=e.map(t,o.id);o.setVal(i),o.updateSelection(t),o.clearSearch(),s&&o.triggerChange(this.buildChangeDetails(n,this.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(i.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,i){var s,n,o=this;return 0===arguments.length?this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(n=this.data(),t||(t=[]),s=e.map(t,function(e){return o.opts.id(e)}),this.setVal(s),this.updateSelection(t),this.clearSearch(),i&&this.triggerChange(this.buildChangeDetails(n,this.data())),void 0)}}),e.fn.select2=function(){var s,n,o,a,r,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","readonly","positionDropdown","data","search"],h=["val","opened","isFocused","container","data"],u={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])s=0===l.length?{}:e.extend({},l[0]),s.element=e(this),"select"===s.element.get(0).tagName.toLowerCase()?r=s.element.prop("multiple"):(r=s.multiple||!1,"tags"in s&&(s.multiple=r=!0)),n=r?new A:new O,n.init(s);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;
if(i(l[0],c)<0)throw"Unknown method: "+l[0];if(a=t,n=e(this).data("select2"),n===t)return;if(o=l[0],"container"===o?a=n.container:"dropdown"===o?a=n.dropdown:(u[o]&&(o=u[o]),a=n[o].apply(n,l.slice(1))),i(l[0],h)>=0)return!1}}),a===t?this:a},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,i,s){var n=[];return b(e.text,i.term,n,s),n.join("")},formatSelection:function(e,i,s){return e?s(e.text):t},sortResults:function(e){return e},formatResultCssClass:function(){return t},formatSelectionCssClass:function(){return t},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(e,t){var i=t-e.length;return"Please enter "+i+" more character"+(1==i?"":"s")},formatInputTooLong:function(e,t){var i=e.length-t;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e.id},matcher:function(e,t){return(""+t).toUpperCase().indexOf((""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:k,escapeMarkup:w,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null}},e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:y,local:C,tags:x},util:{debounce:c,markMatch:b,escapeMarkup:w},"class":{"abstract":I,single:O,multi:A}}}}(jQuery),_wAMD.define("util/ui/Select2",function(){}),Weebly.Commerce=Weebly.Commerce||{},Weebly.Commerce.Site=Weebly.Commerce.Site||{},window.initCommerceModels&&initCommerceModels(),_wAMD.define("site/published/commerce-init",["util/backbone-rpc"],function(){}),_wAMD.define("site/published/commerce-core",["jquery","underscore","backbone","backbone-relational","backbone-validation","vendor/jsonrpc","vendor/jquery.pasteImageReader","vendor/cloud-zoom.1.0.2","util/backbone-rpc","util/backbone-validators","util/misc","util/ui/wSpinner","util/ui/Select2","site/published/commerce-init"],function(){}),_wAMD.define("site/commerce-core",function(){});